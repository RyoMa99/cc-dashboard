# v0.7.2: ダッシュボードの時刻表示を JST (UTC+9) に対応する

## Context

Issue #18。現在すべての時刻表示が UTC 基準になっている。個人利用ダッシュボードなので JST 固定で表示したい。DB の `timestamp_ms` は UTC のまま維持し、表示層のみ変換する。

## 変更対象

| ファイル | 変更内容 |
|---------|---------|
| `src/lib/format.ts` | `formatTime()` を JST 対応に変更 |
| `src/lib/format.test.ts` | テストの期待値を JST に更新 |
| `src/queries/dashboard.ts` | 日別集計 SQL に `'+9 hours'` 追加 |
| `src/queries/dashboard.test.ts` | `msToDateStr` ヘルパーを JST 化 |

## タスク

### タスク 0: 計画ファイル保存 + 作業ブランチ作成

**変更対象**: `docs/plan/v0.7.2.md`, git branch `fix/jst-timezone`

### タスク 1: `formatTime()` を JST に変更

**変更対象**: `src/lib/format.ts`, `src/lib/format.test.ts`

**実装方針**: JST オフセット定数を定義し、`toISOString()` パターンを維持する。

```typescript
const JST_OFFSET_MS = 9 * 60 * 60 * 1000;

export function formatTime(ms: number): string {
  const d = new Date(ms + JST_OFFSET_MS);
  return d.toISOString().replace("T", " ").slice(0, 19);
}
```

**受入条件**:
- WHEN `2025-01-15T12:00:00Z` を渡す THEN `"2025-01-15 21:00:00"` (JST) が返る
- WHEN `2025-01-15T20:00:00Z` (JST 翌日 05:00) を渡す THEN `"2025-01-16 05:00:00"` が返る

### タスク 2: 日別集計 SQL を JST に変更

**変更対象**: `src/queries/dashboard.ts`, `src/queries/dashboard.test.ts`

**実装方針**: SQLite の `date()` に `'+9 hours'` 修飾子を追加する。

```sql
date(a.timestamp_ms / 1000, 'unixepoch', '+9 hours') as date
```

対象箇所: `getDailyCosts()`, `getDailyTokens()` の 2 クエリ。

テストの `msToDateStr` ヘルパーも同様に JST オフセットを加算する。

**受入条件**:
- WHEN JST で同一日のイベント THEN 同じ日付でグルーピングされる
- WHEN UTC 15:00 (= JST 0:00) をまたぐイベント THEN JST 基準で異なる日付に分類される
