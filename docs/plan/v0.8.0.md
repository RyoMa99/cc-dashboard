# v0.8.0 シードデータ投入機能

## Context

ローカル開発でダッシュボードの表示確認をする際、OTLP エンドポイントに手動でデータを送る必要がある。
`pnpm db:seed` コマンド1つでリアルなサンプルデータを投入できるようにし、開発体験を改善する。

Closes #1

## 方針

TypeScript スクリプト（`scripts/seed.ts`）で SQL INSERT 文を生成し、`wrangler d1 execute` でローカル D1 に投入する。
Workers ランタイム外で実行するため、既存の repository 層は経由せず直接 SQL を生成する。

- 実行: `tsx scripts/seed.ts` → SQL ファイル出力 → `wrangler d1 execute --file`
- 冪等性: 全テーブル DELETE → INSERT の順で生成（毎回クリーンな状態）
- タイムスタンプ: `Date.now()` 基準の相対日付（時間経過でフィルタ外にならない）

## データ仕様

| 項目 | 値 |
|------|-----|
| 期間 | 直近 7 日間 |
| セッション数 | 1 日 3-5 セッション（合計 ~28） |
| リポジトリ | `cc-dashboard`(40%), `my-web-app`(40%), `null`(20%) |
| モデル | `claude-sonnet-4-5-20250929`(70%), `claude-haiku-4-5-20251001`(20%), `claude-opus-4-6`(10%) |
| ツール | Read, Edit, Write, Bash, Grep, Glob, Task, WebFetch |

### セッション内イベント構成

| テーブル | 件数/セッション | 備考 |
|---------|----------------|------|
| `sessions` | 1 | repository, first/last event timestamps |
| `user_prompts` | 1-2 | セッション開始時のプロンプト |
| `api_requests` | 5-15 | モデル混在、コスト・トークン付き |
| `tool_results` | 5-20 | 成功率 ~90% |
| `tool_decisions` | 3-10 | accept/reject |
| `api_errors` | 0-1 | 稀（~20% のセッション） |

### 値の範囲

| フィールド | 範囲 |
|-----------|------|
| cost_usd（Opus） | 0.01-0.05 |
| cost_usd（Sonnet） | 0.003-0.015 |
| cost_usd（Haiku） | 0.0005-0.003 |
| input_tokens | 500-10000 |
| output_tokens | 100-2000 |
| cache_read_tokens | 0-5000 |
| cache_creation_tokens | 0-1000 |
| duration_ms（API） | 500-5000 |
| duration_ms（Tool） | 50-2000 |
| セッション時間幅 | 10-60 分 |

## タスク

### タスク 0: 計画ファイル保存 + 作業ブランチ作成
### タスク 1: プロジェクト設定の追加（package.json, .gitignore）
### タスク 2: シードデータ生成スクリプトの作成（scripts/seed.ts）
### タスク 3: 動作検証

## 変更対象ファイル一覧

| ファイル | 操作 |
|---------|------|
| `package.json` | 編集（tsx 追加、db:seed スクリプト追加） |
| `.gitignore` | 編集（.seed.sql 追加） |
| `scripts/seed.ts` | 新規作成 |
| `docs/plan/v0.8.0.md` | 新規作成（計画ファイル） |
