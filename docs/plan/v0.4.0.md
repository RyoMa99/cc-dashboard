# v0.4.0: GitHub Actions CI + ブランチ保護強化

## Context

cc-dashboard リポジトリを Public に変更済み。ブランチ保護に `required_pull_request_reviews` と `required_status_checks` を追加するため、先に CI ワークフローを作成し、そのステータスチェック名を保護設定に紐づける。

## タスク

### タスク 0: 計画ファイルの保存

**変更対象**: `docs/plan/v0.4.0.md`

### タスク 1: GitHub Actions CI ワークフロー作成

**変更対象**: `.github/workflows/ci.yml`（新規作成）

**内容**:
- トリガー: `pull_request`（main ブランチ向け）+ `push`（main ブランチ）
- Node.js 24.13.1 / pnpm 10.29.3（mise.toml と一致）
- 3 つのジョブを並列実行:
  - `lint`: `pnpm lint`
  - `typecheck`: `pnpm typecheck`
  - `test`: `pnpm test`

**受入条件**:
- WHEN PR を main に作成 THEN 3 ジョブが実行される
- WHEN いずれかが失敗 THEN PR にチェック失敗が表示される

### タスク 2: ブランチ保護設定の更新

**変更対象**: GitHub API（`gh api` コマンド）

**内容**:
- `required_pull_request_reviews` を有効化（個人リポジトリのため approvals 数は 0）
- `required_status_checks` に `lint`, `typecheck`, `test` を登録
- 既存設定（force push 禁止、削除禁止、enforce_admins）を維持

**受入条件**:
- WHEN main に直接 push THEN 拒否される
- WHEN PR の CI が失敗 THEN マージ不可

## 検証

1. CI ワークフローを push 後、`gh workflow view ci.yml` で登録確認
2. `gh api repos/RyoMa99/cc-dashboard/branches/main/protection` でブランチ保護設定を確認
